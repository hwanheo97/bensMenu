{"ast":null,"code":"var _jsxFileName = \"C:\\\\boilerplate-mern-stack-master\\\\client\\\\src\\\\components\\\\utils\\\\FileUpload.js\";\nimport React, { useState } from 'react';\nimport Dropzone from 'react-dropzone';\nimport { Icon } from 'antd';\nimport axios from 'axios'; //bakend 에 파일전달 라이브러리\n\nfunction FileUpload(props) {\n  //저장된 파일을 프런트엔드에 전달해주는 기능, 아래 ,23, 37line props 사용위해 인자 넣기\n  const [Images, setImages] = useState([]);\n\n  const dropHandler = files => {\n    let formData = new FormData();\n    const config = {\n      header: {\n        'content-type': 'multipart/form-data'\n      } //backend 에 request시 형식 알리기\n\n    };\n    formData.append(\"file\", files[0]);\n    axios.post('/api/product/image', formData, config) //백엔드에 file 보낼때 error 방지 위해 formData,config 인자 사용\n    .then(response => {\n      if (response.data.success) {\n        //alert('파일을 저장하는데 성공했습니다.')\n        console.log(response.data);\n        setImages([...Images, response.data.filePath]); // ...Images  spread operator를 이용 모든 image 저장\n\n        props.refreshFunction([...Images, response.data.filePath]); //image file을 올릴때 부모 UploadProductPage의 props 호출하여 변경시키기\n      } else {\n        alert('파일을 저장하는데 실패했습니다.');\n      }\n    });\n  }; //end of dropHandler\n\n\n  const deleteHandler = image => {\n    const currentIndex = Images.indexOf(image); //image의 indexOF() 메소드 이용 index 찾기\n    //console.log('currentIndex',currentIndex);\n\n    let newImages = [...Images]; //Images 배열에 있는 모든 images를 newImages에 복사\n\n    newImages.splice(currentIndex, 1); //currendex 1개를 지우는 메소드 splice\n\n    setImages(newImages); //newImages를 셋팅하고 부모  UploadProductPage에 넘겨주어야함\n\n    props.refreshFunction(newImages); //image file을 올릴때 부모 UploadProductPage의 props 호출하여 삭제변경시키기\n  };\n\n  return (\n    /*#__PURE__*/\n    //  {/* npm install react-dropzone --save */}\n    React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'spacebetween'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Dropzone, {\n      onDrop: dropHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    }, ({\n      getRootProps,\n      getInputProps\n    }) => /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n      style: {\n        width: 300,\n        height: 240,\n        border: '1px solid lightgray',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center'\n      }\n    }, getRootProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Icon, {\n      type: \"plus\",\n      style: {\n        fontSize: '3rem'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        width: '350px',\n        height: '240px',\n        overflow: 'scroll',\n        border: '1px solid blue',\n        marginLeft: '1rem'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, Images.map((image, index) => /*#__PURE__*/React.createElement(\"div\", {\n      onClick: () => deleteHandler(image),\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 19\n      }\n    }, \"       \", /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        minWidth: '300px',\n        width: '300px',\n        height: '240px',\n        marginLeft: '.5rem'\n      },\n      src: `http://localhost:5000/${image}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    })))))\n  );\n}\n\nexport default FileUpload;","map":{"version":3,"sources":["C:/boilerplate-mern-stack-master/client/src/components/utils/FileUpload.js"],"names":["React","useState","Dropzone","Icon","axios","FileUpload","props","Images","setImages","dropHandler","files","formData","FormData","config","header","append","post","then","response","data","success","console","log","filePath","refreshFunction","alert","deleteHandler","image","currentIndex","indexOf","newImages","splice","display","justifyContent","getRootProps","getInputProps","width","height","border","alignItems","fontSize","overflow","marginLeft","map","index","minWidth"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport Dropzone from 'react-dropzone'\r\nimport {Icon} from 'antd';\r\nimport axios from 'axios';  \r\n//bakend 에 파일전달 라이브러리\r\n\r\nfunction FileUpload(props) {   \r\n  //저장된 파일을 프런트엔드에 전달해주는 기능, 아래 ,23, 37line props 사용위해 인자 넣기\r\n \r\n  const [Images,setImages] = useState([])   \r\n \r\n  const dropHandler =(files) => {\r\n     let formData = new FormData();\r\n    const config ={\r\n      header:{'content-type' : 'multipart/form-data'} //backend 에 request시 형식 알리기\r\n    }\r\n    formData.append(\"file\",files[0])\r\n\r\n    axios.post('/api/product/image',formData,config)  //백엔드에 file 보낼때 error 방지 위해 formData,config 인자 사용\r\n      .then(response => {\r\n          if(response.data.success){\r\n            //alert('파일을 저장하는데 성공했습니다.')\r\n            console.log(response.data)\r\n            setImages([...Images,response.data.filePath])   // ...Images  spread operator를 이용 모든 image 저장\r\n            props.refreshFunction([...Images,response.data.filePath])   //image file을 올릴때 부모 UploadProductPage의 props 호출하여 변경시키기\r\n\r\n          }else{\r\n            alert('파일을 저장하는데 실패했습니다.')\r\n          }\r\n        })\r\n      }  //end of dropHandler\r\n  \r\n  const deleteHandler =(image) => {\r\n    const currentIndex = Images.indexOf(image)    //image의 indexOF() 메소드 이용 index 찾기\r\n    //console.log('currentIndex',currentIndex);\r\n    let newImages = [...Images]   //Images 배열에 있는 모든 images를 newImages에 복사\r\n    newImages.splice(currentIndex,1)    //currendex 1개를 지우는 메소드 splice\r\n    setImages(newImages)               //newImages를 셋팅하고 부모  UploadProductPage에 넘겨주어야함\r\n    props.refreshFunction(newImages)   //image file을 올릴때 부모 UploadProductPage의 props 호출하여 삭제변경시키기\r\n  }\r\n  return (\r\n        //  {/* npm install react-dropzone --save */}\r\n    <div style={{display:'flex', justifyContent:'spacebetween'}}>\r\n        \r\n      <Dropzone onDrop={dropHandler}>\r\n        {({getRootProps, getInputProps}) => (\r\n          <section>\r\n            <div  style={{\r\n                  width:300, height:240, border:'1px solid lightgray',\r\n                  display:'flex', alignItems:'center', justifyContent:'center'\r\n            }}\r\n            \r\n              {...getRootProps()}>\r\n              <input {...getInputProps()} />\r\n              <Icon type=\"plus\" style={{fontSize:'3rem'}} ></Icon>\r\n            </div>\r\n          </section>\r\n        )}\r\n      </Dropzone>\r\n\r\n            {/* //파일 렌더링  */}\r\n\r\n            <div style={{display:'flex', width:'350px',height:'240px',overflow:'scroll', border:'1px solid blue', marginLeft:'1rem'}}>\r\n              \r\n              {Images.map((image,index) => (   \r\n                  <div onClick={()=>deleteHandler(image)} key={index}>       {/* image index받기위해 image넣기 */}\r\n                    <img style={{minWidth:'300px',width:'300px',height:'240px', marginLeft:'.5rem'}}\r\n                        src={`http://localhost:5000/${image}`} />\r\n                  </div>\r\n              ) )}\r\n\r\n            </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FileUpload\r\n"]},"metadata":{},"sourceType":"module"}